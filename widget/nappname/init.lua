--  _______         __   __   ___ __              __   __
-- |    |  |.-----.|  |_|__|.'  _|__|.----.---.-.|  |_|__|.-----.-----.
-- |       ||  _  ||   _|  ||   _|  ||  __|  _  ||   _|  ||  _  |     |
-- |__|____||_____||____|__||__| |__||____|___._||____|__||_____|__|__|

--  _______
-- |   _   |.-----.-----.
-- |       ||  _  |  _  |
-- |___|___||   __|   __|
--          |__|  |__|
--  _______
-- |    |  |.---.-.--------.-----.
-- |       ||  _  |        |  -__|
-- |__|____||___._|__|__|__|_____|

-- This widget is a specialized `wibox.widget.textbox`
--
-- @original author Andy Freidenfelds &lt;afreidenfelds@gmail.com&gt;
----------------------------------------------------------------------------
-- ########################################################################
-- ########################################################################
-- ########################################################################
local gtable = require('gears.table')
local beautiful = require('beautiful')
local textbox = require('wibox.widget.textbox')
local markup = require('naughty.widget._markup').set_markup
local appname = {}
-- ########################################################################
-- ########################################################################
-- ########################################################################
function appname:set_notification(notif)
    if self._private.notification == notif then
        return
    end
    -- ########################################################################
    -- ########################################################################
    -- ########################################################################
    markup(self, notif.app_name, notif.fg, notif.font)
    self._private.notification = notif
    self:emit_signal('property::notification', notif)
end
-- ########################################################################
-- ########################################################################
-- ########################################################################
local function new(args)
    args = args or {}
    local tb = textbox()
    tb:set_wrap('word')
    tb:set_font(beautiful.notification_font)

    gtable.crush(tb, appname, true)
    -- ########################################################################
    -- ########################################################################
    -- ########################################################################
    if args.notification then
        tb:set_notification(args.notification)
    end

    return tb
end
-- ########################################################################
-- ########################################################################
-- ########################################################################
return setmetatable(
    appname,
    {
        __call = function(_, ...)
            return new(...)
        end
    }
)
