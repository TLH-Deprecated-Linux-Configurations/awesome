--  ______ __ __        __           __     __
-- |      |  |__|.----.|  |--.---.-.|  |--.|  |.-----.
-- |   ---|  |  ||  __||    <|  _  ||  _  ||  ||  -__|
-- |______|__|__||____||__|__|___._||_____||__||_____|

--  ______               __          __
-- |      |.-----.-----.|  |_.---.-.|__|.-----.-----.----.
-- |   ---||  _  |     ||   _|  _  ||  ||     |  -__|   _|
-- |______||_____|__|__||____|___._||__||__|__|_____|__|
-- ########################################################################
-- ########################################################################
-- ########################################################################
local wibox = require("wibox")
local beautiful = require("beautiful")
-- ########################################################################
-- ########################################################################
-- ########################################################################
local function build(widget)
	local container =
		wibox.widget(
		{
			widget,
			widget = wibox.container.background,
			bg = beautiful.bg_button,
			border_color = beautiful.xcolor7 .. "66",
			border_width = dpi(2),
			margins = dpi(0),
			shape = beautiful.btn_sm_shape
		}
	)
	local old_cursor, old_wibox
	-- ########################################################################
	-- ########################################################################
	-- ########################################################################
	container:connect_signal(
		"mouse::enter",
		function()
			container.border_color = beautiful.xcolor7 .. "66"
			container.bg = beautiful.bg_button_press
			local w = mouse.current_wibox
			if w then
				old_cursor, old_wibox = w.cursor, w
				w.cursor = "hand1"
			end
		end
	)
	-- ########################################################################
	-- ########################################################################
	-- ########################################################################
	container:connect_signal(
		"mouse::leave",
		function()
			container.border_color = beautiful.xcolor7 .. "66"
			container.bg = beautiful.bg_button
			if old_wibox then
				old_wibox.cursor = old_cursor
				old_wibox = nil
			end
		end
	)
	-- ########################################################################
	-- ########################################################################
	-- ########################################################################
	container:connect_signal(
		"button::press",
		function()
			container.border_color = beautiful.xcolor7 .. "66"
			container.bg = beautiful.bg_button_press
		end
	)
	-- ########################################################################
	-- ########################################################################
	-- ########################################################################
	container:connect_signal(
		"button::release",
		function()
			container.border_color = beautiful.xcolor7 .. "66"
			container.bg = beautiful.bg_button
		end
	)
	-- ########################################################################
	-- ########################################################################
	-- ########################################################################
	return container
end
-- ########################################################################
-- ########################################################################
-- ########################################################################
return build
