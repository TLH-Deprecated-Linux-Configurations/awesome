--  _____                          _____                  __
-- |     |_.---.-.-----.--.--.    |     |_.-----.---.-.--|  |.-----.----.
-- |       |  _  |-- __|  |  |    |       |  _  |  _  |  _  ||  -__|   _|
-- |_______|___._|_____|___  |    |_______|_____|___._|_____||_____|__|
--                     |_____|
-- ########################################################################
-- ########################################################################
-- ########################################################################
-- more like consistent loader, this really just loads certain aspects of
-- the configuration in the background so that there is not multiple
-- autorun scripts running and to keep certain things loaded in the bg
-- ########################################################################
-- ########################################################################
-- ########################################################################
-- load the menu in the background so it doesn't have an awful delay
--
require("widget.interface.menu")

-- ########################################################################
-- ########################################################################
-- ########################################################################
-- restore the last state
--
require("configuration.settings.state")
require("widget.tutorial")

-- ########################################################################
-- ########################################################################
-- ########################################################################
--  runs when the window manager is exiting
require("configuration.settings.signals").connect_exit(
    function()
        -- stop current autorun.sh
        -- This is done because otherwise multiple instances would be running at the same time
        awful.spawn("pgrep -f" .. HOME .. ".config/awesome/autorun.sh | xargs kill -9")
    end
)
-- ########################################################################
-- ########################################################################
-- ########################################################################
-- spawn the autorun script (again)
awful.spawn(HOME .. "/.config/awesome/autorun.sh ")
-- ########################################################################
-- ########################################################################
-- ########################################################################
require("widget.hardware.screen_changed")
